<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>GTA RP Bewerbung</title>
<style>
  body { font-family: Arial; max-width: 600px; margin: 50px auto; }
  label { display: block; margin-top: 10px; }
  input, textarea { width: 100%; padding: 8px; margin-top: 5px; }
  button { margin-top: 15px; padding: 10px 20px; }
  #status { margin-top: 15px; font-weight: bold; }
</style>
</head>
<body>

<h2>GTA RP Bewerbung</h2>

<form id="bewerbungForm">
  <label>Name:</label>
  <input type="text" name="name" required>

  <label>Alter:</label>
  <input type="number" name="alter" required>

  <label>Discord (nur "1"):</label>
  <input type="text" name="discord" required pattern="1" title="Du musst eine 1 eingeben.">

  <label>Warum willst du bei uns spielen?</label>
  <textarea name="bewerbung" rows="5" required></textarea>

  <button type="submit">Absenden</button>
</form>

<p id="status"></p>

<script>
const form = document.getElementById("bewerbungForm");
const status = document.getElementById("status");

// Hier deine Web-App URL einfÃ¼gen
const scriptURL = "https://script.google.com/macros/s/AKfycbz7x_QY5ugN-ikTfoCU_TWxpvYG2ZCuICr6jcWq0RY6QV3fq__blmryH6inadIp2b2PAA/exec";

form.addEventListener("submit", e => {
  e.preventDefault();

  const discordValue = form.discord.value.trim();
  if(discordValue !== "1"){
    status.textContent = 'Discord muss eine "1" sein!';
    return;
  }

  const formData = {
    name: form.name.value,
    alter: form.alter.value,
    discord: discordValue,
    bewerbung: form.bewerbung.value
  };
  
  fetch(scriptURL, {
    method: "POST",
    body: JSON.stringify(formData)
  })
  .then(response => response.json())
  .then(data => {
    if(data.status === "success"){
      status.textContent = "Bewerbung erfolgreich abgeschickt!";
      form.reset();
    } else {
      status.textContent = "Fehler beim Absenden: " + (data.message || "");
    }
  })
  .catch(err => {
    status.textContent = "Fehler beim Absenden!";
    console.error(err);
  });
});
</script>

</body>
</html>
