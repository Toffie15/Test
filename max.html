<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Link-Datenbank</title>
<style>
:root{
  --bg:#0a0c12;
  --panel:rgba(255,255,255,0.08);
  --panel-strong:rgba(255,255,255,0.14);
  --text:#f1f2f6;
  --muted:#9aa0b3;
  --accent:#7c6cff;
  --danger:#ff5c5c;
  --radius:18px;
}
*{box-sizing:border-box}
html,body{margin:0}
body{
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  background:
    radial-gradient(1200px 600px at 10% -10%,#1b2040 0%,transparent 45%),
    radial-gradient(900px 500px at 90% 10%,#241a3d 0%,transparent 40%),
    #0a0c12;
  color:var(--text);
}

header{
  position:sticky;top:0;z-index:10;
  backdrop-filter:blur(18px);
  background:rgba(10,12,18,.75);
  border-bottom:1px solid rgba(255,255,255,.08)
}
.header-inner{
  max-width:1280px;margin:auto;padding:1rem 1.25rem;
  display:flex;align-items:center;gap:.75rem
}
.header-title{font-weight:700;letter-spacing:.4px}
.header-spacer{flex:1}

button,input,select{
  background:var(--panel);
  backdrop-filter:blur(12px);
  border:1px solid rgba(255,255,255,.18);
  color:var(--text);
  padding:.6rem .9rem;
  border-radius:12px;
}
button{cursor:pointer}
button.primary{background:linear-gradient(135deg,#8b7bff,#6a5cff);border:none}
button.ghost{background:transparent;border:none}

main{max-width:1280px;margin:auto;padding:2rem 1.25rem 4rem}

section{margin-bottom:2.5rem}
.section-head{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:1.2rem
}
.section-left{display:flex;align-items:center;gap:.5rem}
.section-left h2{margin:0;font-size:1.15rem}
.section-actions button{opacity:.7}
.section-actions button:hover{opacity:1}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:1.25rem
}

.card{
  position:relative;
  padding:1.2rem 1.2rem 1.1rem;
  border-radius:var(--radius);
  background:var(--panel);
  backdrop-filter:blur(18px) saturate(180%);
  border:1px solid rgba(255,255,255,.18);
  transition:transform .25s, box-shadow .25s, background .25s;
  cursor:pointer;
}
.card:hover{
  transform:translateY(-6px) scale(1.01);
  background:var(--panel-strong);
  box-shadow:0 18px 40px rgba(0,0,0,.45)
}
.card-title{font-weight:600;color:var(--accent)}
.card-desc{font-size:.9rem;color:var(--muted);margin-top:.15rem}
.card-menu{
  position:absolute;top:.7rem;right:.7rem;
  font-size:1.4rem;opacity:.65
}
.card-menu:hover{opacity:1}

.modal{
  position:fixed;inset:0;display:none;
  align-items:center;justify-content:center;
  background:rgba(0,0,0,.65);z-index:50
}
.modal-box{
  width:100%;max-width:440px;
  background:rgba(20,24,45,.9);
  backdrop-filter:blur(18px);
  padding:1.6rem;border-radius:22px;
  border:1px solid rgba(255,255,255,.18)
}
.modal-box h3{margin-top:0}
.row{margin-bottom:.9rem}
.modal-actions{display:flex;justify-content:space-between;gap:.5rem}
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="header-title">üìÅ Link-Datenbank</div>
    <div class="header-spacer"></div>
    <button id="addCat">+ Kategorie</button>
    <button class="primary" id="addLink">+ Link</button>
  </div>
</header>

<main id="app"></main>

<!-- LINK MODAL -->
<div class="modal" id="modalLink">
  <div class="modal-box">
    <h3>Link hinzuf√ºgen/bearbeiten</h3>
    <div class="row"><input id="lTitle" placeholder="Titel"></div>
    <div class="row"><input id="lDesc" placeholder="Beschreibung"></div>
    <div class="row"><input id="lUrl" placeholder="https://"></div>
    <div class="row">
      <select id="lCat"></select>
    </div>
    <div class="modal-actions">
      <button onclick="modalLink.style.display='none'">Abbrechen</button>
      <button class="primary" id="saveLinkBtn">Speichern</button>
    </div>
  </div>
</div>

<!-- CATEGORY MODAL -->
<div class="modal" id="modalCat">
  <div class="modal-box">
    <h3>Kategorie</h3>
    <div class="row"><input id="cName" placeholder="Name"></div>
    <div class="modal-actions">
      <button onclick="modalCat.style.display='none'">Abbrechen</button>
      <button class="primary" id="saveCatBtn">Speichern</button>
    </div>
  </div>
</div>

<script>
const app = document.getElementById('app');
const modalLink = document.getElementById('modalLink');
const modalCat = document.getElementById('modalCat');
const lCatSelect = document.getElementById('lCat');
let data = JSON.parse(localStorage.getItem('links') || '{}');
let editCat = null;
let editLink = null;

function render(){
  app.innerHTML='';
  lCatSelect.innerHTML='';
  Object.keys(data).sort().forEach(cat=>{
    const option = document.createElement('option');
    option.value = cat; option.textContent = cat;
    lCatSelect.appendChild(option);

    const sec=document.createElement('section');
    sec.innerHTML=`
      <div class="section-head">
        <div class="section-left"><h2>${cat}</h2></div>
        <div class="section-actions">
          <button class="ghost" onclick="editCategory('${cat}')">‚úèÔ∏è</button>
          <button class="ghost" onclick="deleteCategory('${cat}')">üóëÔ∏è</button>
        </div>
      </div>`;

    const grid=document.createElement('div');
    grid.className='grid';

    data[cat].forEach((l,i)=>{
      const c=document.createElement('div');
      c.className='card';
      c.innerHTML=`
        <div class="card-menu" onclick="event.stopPropagation();editLink('${cat}',${i})">‚úèÔ∏è</div>
        <div class="card-title">${l.title}</div>
        <div class="card-desc">${l.desc}</div>`;
      c.onclick=()=>window.open(l.url,'_blank');
      grid.appendChild(c);
    });

    sec.appendChild(grid);
    app.appendChild(sec);
  });
}

function save(){ localStorage.setItem('links',JSON.stringify(data)); render(); }

function editCategory(cat){ editCat=cat; cName.value=cat; modalCat.style.display='flex'; }
function deleteCategory(cat){ if(confirm(`Kategorie "${cat}" l√∂schen?`)){ delete data[cat]; save(); } }
function saveCategory(){
  const name=cName.value.trim();
  if(!name) return;
  if(editCat){
    if(name!==editCat){ data[name]=data[editCat]; delete data[editCat]; }
    editCat=null;
  } else if(!data[name]) data[name]=[];
  modalCat.style.display='none'; save();
}

function editLink(cat,i){
  editLink={cat,i};
  const l=data[cat][i];
  lTitle.value=l.title; lDesc.value=l.desc; lUrl.value=l.url;
  lCatSelect.value = cat;
  modalLink.style.display='flex';
}

function saveLink(){
  const cat=lCatSelect.value;
  if(!cat) return;
  if(editLink){
    const {cat:oldCat,i} = editLink;
    data[oldCat].splice(i,1);
    if(data[oldCat].length===0) delete data[oldCat];
    editLink=null;
  }
  data[cat]=data[cat]||[];
  data[cat].push({title:lTitle.value||'Ohne Titel',desc:lDesc.value||'',url:lUrl.value});
  modalLink.style.display='none'; save();
}

addLink.onclick=()=>{ editLink=null; modalLink.style.display='flex'; lTitle.value=''; lDesc.value=''; lUrl.value=''; lCatSelect.value = Object.keys(data)[0]||''; };
addCat.onclick=()=>{ editCat=null; cName.value=''; modalCat.style.display='flex'; };
saveLinkBtn.onclick=saveLink;
saveCatBtn.onclick=saveCategory;

render();
</script>
</body>
</html>
