<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Link-Datenbank</title>
<style>
:root{
  --bg:#0b0d12;
  --panel:#141824;
  --text:#e8e9ee;
  --muted:#9aa0b3;
  --accent:#7c6cff;
  --danger:#ff5c5c;
  --radius:14px;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
header{position:sticky;top:0;background:rgba(11,13,18,.85);backdrop-filter:blur(14px);border-bottom:1px solid rgba(255,255,255,.08)}
.header-inner{max-width:1200px;margin:auto;padding:1rem;display:flex;gap:.75rem}
button,input{background:var(--panel);border:1px solid rgba(255,255,255,.1);color:var(--text);padding:.6rem .8rem;border-radius:10px}
button.primary{background:linear-gradient(135deg,#8b7bff,#6a5cff);border:none}
button.ghost{background:transparent}
main{max-width:1200px;margin:auto;padding:1.5rem}
section{margin-bottom:2rem}
.section-head{display:flex;justify-content:space-between;align-items:center;cursor:pointer}
.section-left{display:flex;align-items:center;gap:.5rem}
.section-left h2{margin:0;font-size:1.1rem}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1rem;margin-top:1rem}
.card{position:relative;background:rgba(255,255,255,.08);backdrop-filter:blur(14px);border:1px solid rgba(255,255,255,.18);border-radius:var(--radius);padding:1rem;cursor:pointer;transition:transform .25s,box-shadow .25s}
.card:hover{transform:translateY(-6px);box-shadow:0 14px 32px rgba(0,0,0,.45)}
.card-title{font-weight:600;color:var(--accent)}
.card-desc{font-size:.9rem;color:var(--muted)}
.card-menu{position:absolute;top:.6rem;right:.6rem;font-size:1.4rem;opacity:.85}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.65);z-index:50}
.modal-box{background:var(--panel);padding:1.5rem;border-radius:18px;width:100%;max-width:420px}
.row{margin-bottom:.8rem}
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <button class="primary" id="addLink">+ Link</button>
    <button id="addCat">+ Kategorie</button>
  </div>
</header>
<main id="app"></main>

<div class="modal" id="modalLink">
  <div class="modal-box">
    <h3>Link hinzuf√ºgen</h3>
    <div class="row"><input id="lTitle" placeholder="Titel"></div>
    <div class="row"><input id="lDesc" placeholder="Beschreibung"></div>
    <div class="row"><input id="lUrl" placeholder="https://"></div>
    <div class="row"><input id="lCat" placeholder="Kategorie"></div>
    <button class="primary" id="saveLinkBtn">Speichern</button>
  </div>
</div>

<div class="modal" id="modalCat">
  <div class="modal-box">
    <h3>Kategorie</h3>
    <div class="row"><input id="cName" placeholder="Name"></div>
    <button class="primary" id="saveCatBtn">Speichern</button>
  </div>
</div>

<script>
const app = document.getElementById('app');
const modalLink = document.getElementById('modalLink');
const modalCat = document.getElementById('modalCat');
let data = JSON.parse(localStorage.getItem('links') || '{}');
let editCat = null;

function render(){
  app.innerHTML='';
  Object.keys(data).sort().forEach(cat=>{
    const sec=document.createElement('section');
    sec.innerHTML=`<div class="section-head">
      <div class="section-left">
        <h2>${cat}</h2>
        <button class="ghost" onclick="event.stopPropagation();editCategory('${cat}')">‚úèÔ∏è</button>
        <button class="ghost" onclick="event.stopPropagation();deleteCategory('${cat}')">üóëÔ∏è</button>
      </div>
      <span>${data[cat].length}</span>
    </div>`;

    const grid=document.createElement('div');
    grid.className='grid';

    data[cat].forEach(l=>{
      const c=document.createElement('div');
      c.className='card';
      c.innerHTML=`<div class="card-menu">‚ãÆ</div><div class="card-title">${l.title}</div><div class="card-desc">${l.desc}</div>`;
      c.onclick=()=>window.open(l.url,'_blank');
      grid.appendChild(c);
    });

    sec.appendChild(grid);
    app.appendChild(sec);
  });
}

function save(){ localStorage.setItem('links',JSON.stringify(data)); render(); }

function editCategory(cat){ editCat=cat; cName.value=cat; modalCat.style.display='flex'; }
function deleteCategory(cat){ if(confirm(`Kategorie "${cat}" wirklich l√∂schen?`)){ delete data[cat]; save(); } }
function saveCategory(){
  const name=cName.value.trim();
  if(!name) return;
  if(editCat){
    if(name!==editCat){ data[name]=data[editCat]; delete data[editCat]; }
    editCat=null;
  } else {
    if(!data[name]) data[name]=[];
  }
  modalCat.style.display='none'; save();
}

function saveLink(){
  const cat=lCat.value.trim()||'Allgemein';
  data[cat]=data[cat]||[];
  data[cat].push({title:lTitle.value||'Ohne Titel',desc:lDesc.value||'',url:lUrl.value});
  modalLink.style.display='none'; save();
}

addLink.onclick=()=>{ modalLink.style.display='flex'; };
addCat.onclick=()=>{ editCat=null; cName.value=''; modalCat.style.display='flex'; };
saveLinkBtn.onclick=saveLink;
saveCatBtn.onclick=saveCategory;

render();
</script>
</body>
</html>
