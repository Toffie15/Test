<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Link-Dashboard</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0a0c14;
  --panel:#111528;
  --glass:rgba(255,255,255,.05);
  --border:rgba(255,255,255,.12);
  --text:#f2f3f7;
  --muted:#8f93b2;
  --accent:#7c6cff;
  --accent-hover:#5a4dff;
  --danger:#ff5c5c;
  --radius:20px;
  --shadow:0 10px 30px rgba(0,0,0,0.3);
}
*{box-sizing:border-box}
html,body{margin:0}
body{
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
  background:linear-gradient(160deg,#1c1f38,#0b0c14);
  color:var(--text);
}
header{
  position:sticky;top:0;z-index:30;
  backdrop-filter:blur(22px);
  background:rgba(10,12,20,.85);
  border-bottom:1px solid var(--border);
}
.header-inner{
  max-width:1320px;margin:auto;
  padding:1rem 1.5rem;
  display:flex;align-items:center;justify-content:space-between;
}
.header-title{font-weight:700;font-size:1.5rem}

button,input,select{
  font-family:inherit;
  background:var(--glass);
  border:1px solid var(--border);
  color:var(--text);
  padding:.7rem 1rem;
  border-radius:var(--radius);
}
button:hover{transform:translateY(-2px)}
button.primary{
  background:linear-gradient(135deg,var(--accent),var(--accent-hover));
  border:none;color:#fff
}
button.ghost{background:none;border:none;opacity:.7}
button.ghost:hover{opacity:1}

main{max-width:1320px;margin:auto;padding:2.5rem 1.5rem 4rem}
section{margin-bottom:3.5rem}
.section-head{display:flex;justify-content:space-between;margin-bottom:1.5rem}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.8rem}

.card{
  position:relative;
  padding:1.8rem;
  border-radius:var(--radius);
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.01));
  border:1px solid var(--border);
  cursor:pointer;
  box-shadow:var(--shadow);
  transition:.25s;
}
.card:hover{transform:translateY(-6px) scale(1.02)}
.card-title{font-weight:600}
.card-desc{font-size:.9rem;color:var(--muted);margin-top:.4rem}
.card-menu{position:absolute;top:.7rem;right:.7rem;opacity:.6}

.empty{
  padding:3rem;
  border:1px dashed var(--border);
  border-radius:var(--radius);
  color:var(--muted);
  text-align:center;
}

.modal{
  position:fixed;inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.75);
  z-index:50;
}
.modal-box{
  max-width:480px;
  width:100%;
  background:var(--panel);
  padding:2.5rem;
  border-radius:28px;
  border:1px solid var(--border);
}
.row{margin-bottom:1.2rem}
.modal-actions{display:flex;gap:.8rem;justify-content:space-between}

.context{
  position:fixed;
  display:none;
  flex-direction:column;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:20px;
  overflow:hidden;
}
.context button{
  background:none;border:none;
  padding:.8rem 1.2rem;
  text-align:left;
}
.context button:hover{background:rgba(255,255,255,.08)}
</style>
</head>

<body>

<header>
  <div class="header-inner">
    <div class="header-title">Link-Dashboard</div>
    <div>
      <button id="addCat">Kategorie</button>
      <button id="infoBtn" class="ghost">ⓘ</button>
      <button class="primary" id="addLink">Link</button>
      <button id="quickAdd" class="ghost">Quick Add</button>
    </div>
  </div>
</header>

<main id="app"></main>

<!-- MODALS -->

<div class="modal" id="modalLink">
  <div class="modal-box">
    <h3>Link</h3>
    <div class="row"><input id="lTitle" placeholder="Titel"></div>
    <div class="row"><input id="lDesc" placeholder="Beschreibung"></div>
    <div class="row"><input id="lUrl" placeholder="https://"></div>
    <div class="row"><input type="color" id="lColor" value="#7c6cff"></div>
    <div class="row"><select id="lCat"></select></div>
    <div class="modal-actions">
      <button onclick="modalLink.style.display='none'">Abbrechen</button>
      <button class="primary" id="saveLinkBtn">Speichern</button>
    </div>
  </div>
</div>

<div class="modal" id="modalQuick">
  <div class="modal-box">
    <h3>Quick Add</h3>
    <div class="row"><input id="qUrl" placeholder="https://"></div>
    <div class="modal-actions">
      <button onclick="modalQuick.style.display='none'">Abbrechen</button>
      <button class="primary" id="saveQuickBtn">Speichern</button>
    </div>
  </div>
</div>

<div class="modal" id="modalCat">
  <div class="modal-box">
    <h3>Kategorie</h3>
    <div class="row"><input id="cName" placeholder="Name"></div>
    <div class="modal-actions">
      <button onclick="modalCat.style.display='none'">Abbrechen</button>
      <button class="primary" id="saveCatBtn">Speichern</button>
    </div>
  </div>
</div>

<div class="modal" id="modalInfo">
  <div class="modal-box">
    <h3>Shortcuts</h3>
    N = Neuer Link<br>
    C = Neue Kategorie<br>
    Q = Quick Add<br>
    Esc = Schließen
    <div class="modal-actions">
      <button class="primary" onclick="modalInfo.style.display='none'">OK</button>
    </div>
  </div>
</div>

<div class="context" id="ctx">
  <button id="ctxEdit">Bearbeiten</button>
  <button id="ctxDelete" style="color:var(--danger)">Löschen</button>
</div>

<script src="https://unpkg.com/lucide@latest"></script>

<script>
const app=document.getElementById('app');
const modalLink=document.getElementById('modalLink');
const modalCat=document.getElementById('modalCat');
const modalInfo=document.getElementById('modalInfo');
const modalQuick=document.getElementById('modalQuick');
const ctx=document.getElementById('ctx');

let data=JSON.parse(localStorage.getItem('links')||'{}');
let collapsed=JSON.parse(localStorage.getItem('collapsedCats')||'{}');
let editLink=null, dragSrc=null;

function render(){
  app.innerHTML='';
  lCat.innerHTML='';
  Object.keys(data).sort().forEach(cat=>{
    lCat.add(new Option(cat,cat));

    const sec=document.createElement('section');
    sec.innerHTML=`
      <div class="section-head">
        <h2 style="cursor:pointer" onclick="toggleCategory('${cat}')">
          ${collapsed[cat]?'▶':'▼'} ${cat}
        </h2>
      </div>
    `;
    const grid=document.createElement('div');
    grid.className='grid';
    if(collapsed[cat]) grid.style.display='none';

    if(!data[cat].length){
      grid.innerHTML='<div class="empty">Keine Links</div>';
    }

    data[cat].forEach((l,i)=>{
      const c=document.createElement('div');
      c.className='card';
      c.innerHTML=`
        <div class="card-menu" data-cat="${cat}" data-i="${i}">
          <i data-lucide="more-vertical"></i>
        </div>
        <div class="card-title" style="color:${l.color}">${l.title}</div>
        <div class="card-desc">${l.desc}</div>
      `;
      c.onclick=()=>window.open(l.url,'_blank');
      grid.appendChild(c);
    });

    sec.appendChild(grid);
    app.appendChild(sec);
  });
  lucide.createIcons();
}

function save(){
  localStorage.setItem('links',JSON.stringify(data));
  localStorage.setItem('collapsedCats',JSON.stringify(collapsed));
  render();
}

function toggleCategory(cat){
  collapsed[cat]=!collapsed[cat];
  save();
}

/* Buttons */

addLink.onclick=()=>{editLink=null;modalLink.style.display='flex'}
addCat.onclick=()=>{cName.value='';modalCat.style.display='flex'}
infoBtn.onclick=()=>modalInfo.style.display='flex'
quickAdd.onclick=()=>{qUrl.value='';modalQuick.style.display='flex'}

/* Save */

saveCatBtn.onclick=()=>{
  const n=cName.value.trim();
  if(!n) return;
  if(!data[n]) data[n]=[];
  modalCat.style.display='none';
  save();
}

saveLinkBtn.onclick=()=>{
  const cat=lCat.value;
  if(!data[cat]) data[cat]=[];
  data[cat].push({
    title:lTitle.value||'Ohne Titel',
    desc:lDesc.value||'',
    url:lUrl.value,
    color:lColor.value
  });
  modalLink.style.display='none';
  save();
}

saveQuickBtn.onclick=()=>{
  const url=qUrl.value.trim();
  if(!url) return;
  const cat=Object.keys(data)[0]||'Allgemein';
  if(!data[cat]) data[cat]=[];
  data[cat].push({
    title:url.replace(/^https?:\/\//,'').split('/')[0],
    desc:'',
    url,
    color:'#7c6cff'
  });
  modalQuick.style.display='none';
  save();
}

/* HOTKEYS */

document.addEventListener('keydown',e=>{
  if(['INPUT','SELECT','TEXTAREA'].includes(e.target.tagName)) return;

  if(e.key==='n'||e.key==='N') modalLink.style.display='flex';
  if(e.key==='c'||e.key==='C') modalCat.style.display='flex';
  if(e.key==='q'||e.key==='Q'){ qUrl.value=''; modalQuick.style.display='flex'; }

  if(e.key==='Escape'){
    modalLink.style.display='none';
    modalCat.style.display='none';
    modalQuick.style.display='none';
    modalInfo.style.display='none';
  }
});

render();
</script>
</body>
</html>
